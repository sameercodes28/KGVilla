# SWEDISH RESIDENTIAL CONSTRUCTION KNOWLEDGE BASE (MASTER REFERENCE 2025)

This document serves as the ground truth for the AI Quantity Surveyor. It combines legal requirements (BBR), industry standards (Säker Vatten, SS 436 40 00), and 2025 market pricing.

---

## PART 1: BOVERKET BUILDING REGULATIONS (BBR 29 / 2025)

### CHAPTER 3: ACCESSIBILITY & USABILITY
**3:142 Entrance & Communication**
*   **Entrance Door:** Clear opening width must be at least **0.80 meters**. (Standard: Module 10x21 door).
*   **Step height:** Max 20mm threshold at entrance.
*   **Ramp:** If ground level differs, max slope 1:12.
*   **Hallway:** Minimum width **1.20 meters** to allow wheelchair turning and furniture transport.
*   **Internal Doors:** All doors on the entrance floor must have clear opening **0.76m** (Module 9 door minimum).

**3:146 Hygiene Rooms (Bathrooms)**
*   **Mandatory:** At least one bathroom on the entrance floor must be fully accessible.
*   **Dimensions:** Must accommodate a turning circle of **1.30 meters** diameter.
*   **Clearances:**
    *   WC side 1: **0.80m** free space.
    *   WC side 2: **0.20m** free space.
    *   In front of WC: **1.10m** free space.
*   **Door:** Must open OUTWARDS or be sliding. No threshold > 20mm.

**3:152 Dwelling Design**
*   **Bedroom (Main):** Must fit double bed (180x200cm) with access from both sides + accessibility. Min width approx **3.0 - 3.2m**.
*   **Kitchen:** Must have 1.2m clearance between counters.
*   **Laundry:** Must be accessible. Washer/Dryer usually stacked or side-by-side with worktop.

---

### CHAPTER 5: FIRE SAFETY (Class 3 Building - Villa)
**5:221 Fire Cells**
*   **General:** A detached villa is one fire cell.
*   **Attached Garage:** The wall between a garage and the living space MUST be **EI 30** (Fire Resistant 30 mins) and smoke-proof (Sa).
    *   *Construction:* 70mm studs + 120mm mineral wool + 13mm Gypsum + 13mm Gypsum (Double Layer) on garage side.
    *   *Door:* Must be classified **EI 30-Sa**.
*   **Boiler Room:** If solid fuel (wood/pellets) > 60kW, separate fire cell required. Heat pumps usually exempt.

**5:35 Escape Routes**
*   **Requirement:** Two independent escape routes from each floor.
*   **Windows as Escape:** Allowed if:
    *   Clear opening (Width + Height) >= **1.50 meters**.
    *   Minimum Width >= **0.50m**.
    *   Minimum Height >= **0.60m**.
    *   Sill height <= **1.20m** from floor (otherwise a fixed step is required).

**5:5 Roof Safety**
*   **Ladder/Steps:** Mandatory for chimney sweep access if roof pitch > 6 degrees.
*   **Snow Guards (Snörasskydd):** Mandatory above entrances/walkways on pitched roofs.

---

### CHAPTER 6: HYGIENE, HEALTH & ENVIRONMENT
**6:62 Moisture Safety (Våtrum)**
*   **Floor Slope:** 
    *   Shower zone: **1:50 - 1:150**.
    *   Rest of room: **1:100 - 1:200** (cannot be flat, must drain to gully).
*   **Waterproofing (Tätskikt):**
    *   **Zone 1 (Wet):** Shower/Bath + 1m perimeter. Requires Foil System (Folie).
    *   **Zone 2 (Damp):** Rest of room.
    *   **Corners:** Pre-fabricated corner cuffs mandatory.
*   **Penetrations:** NO PIPES allowed through floor in Zone 1 (except drain). Pipes must enter via wall or Zone 2.

**6:64 Water Supply**
*   **Legionella:** Hot water must be min **50°C** at tap, **60°C** in tank.
*   **Safety:** Mixer taps must have pressure balancing (to prevent scalding).
*   **Leakage:** All concealed water pipes MUST be **Pipe-in-Pipe (Rör-i-Rör)** with a drainage outlet to a visible location (distribution cabinet).

---

### CHAPTER 9: ENERGY (BBR 29)
*   **U-Values (Reference Levels):**
    *   Roof: 0.08 W/m2K
    *   Walls: 0.10 - 0.18 W/m2K
    *   Windows: 0.80 - 1.0 W/m2K (Requires Triple Glazing)
    *   Doors: 1.0 W/m2K
*   **Primary Energy Number:** Calculated value must be < 85 kWh/m2/year (Zone III).
*   **Airtightness:** < 0.6 l/s m2 at 50Pa pressure. (Requires taped vapor barrier).

### **NEW 2025: CLIMATE DECLARATION (Klimatdeklaration)**
*   **Requirement:** Mandatory for new buildings.
*   **Limit Values (July 2025):** New limit values for CO2e/m2 (Modules A1-A5) apply to small houses.
*   **Cost Impact:** Requires Life Cycle Assessment (LCA) calculation. Add line item: "Climate Declaration & LCA" (~15,000 - 25,000 SEK).

---

## PART 2: SÄKER VATTEN 2021:2 (INDUSTRY RULES)
*Adherence is mandatory for insurance coverage.*

**1. KITCHEN REQUIREMENTS**
*   **Leakage Trays (Läckageskydd):** MANDATORY under Dishwasher, Fridge, Freezer.
*   **Shut-off Valve:** Dishwasher mixer must have an easily accessible shut-off valve *above* the worktop.
*   **Waste:** Dishwasher hose must be looped up under counter (high loop) to prevent backflow.

**2. BATHROOM WALL CONSTRUCTION**
*   **Mounting:** To screw things into wet walls (shower rail, furniture), the wall needs special reinforcement.
    *   *Approved:* 15mm Construction Plywood (K-plyfa) behind the Humid Board.
    *   *Alternative:* "Säker Vatten Wall" (Våtrumsvägg 2012) specific stud spacing cc 300mm.
*   **Distance:** Pipe penetrations must be **cc 60mm** minimum from each other and **60mm** from the wall corner to allow waterproofing collar.

**3. DISTRIBUTION CABINETS**
*   Must be mounted with a waterproof bottom.
*   Must have a "Skvallerrör" (Tell-tale pipe) draining through the wall to a wet room floor to indicate leaks inside the cabinet.

---

## PART 3: SS 436 40 00 (ELECTRICAL INSTALLATIONS)

**1. ZONING IN BATHROOMS**
*   **Zone 0 (Inside tub/shower basin):** IPX7 min. 12V only.
*   **Zone 1 (Above bath to 2.25m):** IPX4 min. Water heaters allowed.
*   **Zone 2 (0.6m radius from Zone 1):** IPX4 min. Sockets allowed ONLY if RCD protected.
*   **Outside Zones:** General IP21 sockets allowed.

**2. GENERAL RESIDENTIAL**
*   **RCD (Jordfelsbrytare):** MANDATORY for all sockets up to 32A and lighting circuits.
*   **Grounding:** All exposed metal parts (water pipes, boiler frame) must be bonded (Skyddsutjämning).
*   **Outdoor:** Outlets must be RCD protected and typically IP44.
*   **Kitchen:** Dedicated heavy feeds:
    *   Stove (Spis): 3-phase 16A (Perilex socket).
    *   Oven/Micro: 1-phase 16A/10A.
    *   Dishwasher: 1-phase 10A (High position socket recommended).

---

## PART 4: PRICING DATABASE (SEK 2025 ESTIMATES)
*Labor Rate: 750 SEK/h (charged). Material Markup: 10-15%. VAT 25% Included.*

### ASSEMBLY RECIPES (Material + Labor per Unit)

**WALLS**
*   **Exterior Wall (260mm Energy):** 3,800 kr/m²
    *   *Components:* Facade panel, air gap, wind board, 195+45mm studs, 260mm wool, plastic, OSB, Gypsum.
*   **Interior Wall (Standard 70mm):** 1,450 kr/m²
    *   *Components:* 70mm studs (cc450), 45mm wool, OSB + Gypsum both sides.
*   **Interior Wall (Wet Room - Säker Vatten):** 4,200 kr/m²
    *   *Components:* 70mm studs (cc300), 15mm Ply, Humid Board, Foil System, Tiles, Grout.

**FLOORS**
*   **Slab on Grade (Platta):** 3,500 kr/m²
    *   *Components:* Excavation, gravel, 300mm EPS (Cellplast), Radon barrier, Rebar, Concrete, UFH pipes.
*   **Inter-floor (Bjälklag):** 2,800 kr/m²
    *   *Components:* 220mm joists, insulation, chipboard (glued/screwed), secondary spacing, gypsum ceiling.

**FINISHES**
*   **Parquet (Oak 14mm):** 850 kr/m²
*   **Tiles (Hall/Laundry):** 1,600 kr/m²
*   **Painting (Walls):** 350 kr/m² (Spackling + 2 coats)

**ELECTRICAL (Per Point)**
*   **Socket/Switch (New):** 1,400 kr (Box, flex pipe, wire, device, labor).
*   **Spotlight (LED):** 1,600 kr (Pot, driver, light).
*   **Media Cabinet:** 8,000 kr.
*   **Meter Cabinet (Fasadmätarskåp):** 12,000 kr.

**PLUMBING (Per Unit)**
*   **WC (Wall-hung):** 14,000 kr (Frame + Porcelain + Button + Install).
*   **Washbasin + Mixer:** 6,000 kr.
*   **Shower Wall (Glass):** 8,000 kr.
*   **Floor Drain (Installation):** 6,500 kr.
*   **Heat Pump (F730):** 125,000 kr.

**SOFT COSTS (Mandatory)**
*   **Project Mgmt & BAS-P/U:** 60,000 kr.
*   **Climate Declaration (LCA):** 20,000 kr.
*   **Building Permit (Bygglov) Fee:** ~40,000 kr (varies by municipality).

---

## PART 5: REGIONAL COST FACTORS (2025)

**REGION: STOCKHOLM (High Cost)**
*   **VA Connection:** ~345,000 SEK (Proposed +33% hike).
*   **Electricity Connection:** High demand area. Expect ~50,000 SEK+.
*   **Labor:** +10% premium on hourly rates.

**REGION: VÄSTRA GÖTALAND (Göteborg/Borås)**
*   **VA Connection:**
    *   *Göteborg:* ~10% increase. Base fee approx 200,000 - 250,000 SEK.
    *   *Borås:* ~12% increase.
*   **Electricity Connection (Ellevio/Vattenfall):**
    *   Network fees rising ~5-8%.
    *   Connection fee approx **35,000 - 45,000 SEK**.
    *   *Note:* New "Effect Tariffs" (Effekttaxa) apply to monthly bills, incentivizing smart energy systems (Solar/Battery).

---

## SECTION 6: MEASUREMENT & FINISH STANDARDS

### SS 21054:2009 (AREA MEASUREMENT RULES - DETAILED)

#### Area Types in Swedish Building Standards
*   **NTA (Nettoarea):** Net area - measured inside rooms, excluding walls. This is what floor plan room labels show.
*   **BRA (Bruksarea):** Usable area - includes inner walls but not outer walls.
*   **BTA (Bruttoarea):** Gross area - includes all walls.
*   **BYA (Byggnadsarea):** Building footprint - outside of exterior walls.

#### BOA vs Biarea Classification (Critical for Pricing!)

**BOA (Boarea) - Living Area:**
*   Heated, finished living spaces
*   Used for: Flooring, Ceiling Paint, Indoor Climate, kr/m² calculations
*   Includes:
    - Bedrooms (SOVRUM, SOV)
    - Living rooms (VARDAGSRUM, ALLRUM)
    - Kitchen (KÖK)
    - Bathrooms (WC, BAD, WC/BAD)
    - Entry/Hall (ENTRÉ, HALL)
    - Laundry (TVÄTT, GROVENTRÉ) - typically heated
    - Walk-in closets (KLK, KLÄDKAMMARE)
    - Dining (MATPLATS)

**Biarea - Secondary Area:**
*   Unheated or non-living spaces
*   Priced differently (lower cost per m²)
*   Includes:
    - GARAGE (~8,000-12,000 kr/m²)
    - FÖRRÅD (Storage) (~6,000-10,000 kr/m²)
    - CARPORT
    - TEKNIKRUM (Technical room)
    - PANNRUM (Boiler room)
    - KALLFÖRRÅD (Cold storage)

#### Wall Thickness Adjustment (NTA → BRA Conversion)
Floor plan room labels show **Net Area (NTA)** - the interior dimensions.
Builder specifications typically use **Gross Area (BRA)** - includes inner walls.

**Conversion Factor: 1.035 (3.5%)**
*   Typical inner wall: 100-120mm
*   This adds ~3.5% to net area
*   Example: 183 m² NTA × 1.035 = 189.4 m² BRA

**Formula Verification (JB Villan Hus 1405):**
| Source | BOA | Biarea | Total |
|--------|-----|--------|-------|
| Room labels (NTA) | 134.6 m² | 48.4 m² | 183.0 m² |
| With wall adjustment (×1.035) | 139.3 m² | 50.1 m² | 189.4 m² |
| Builder spec | 140.2 m² | 49.3 m² | 189.5 m² |
| **Difference** | -0.9 m² | +0.8 m² | **-0.1 m²** |

### BBV 21:1 (TILING IN WET ROOMS)
*   **Requirement:** If tiling a bathroom, you MUST follow BBV rules.
*   **Wall Structure:** "Säker Vatten Wall" (15mm Ply + Board) is mandatory to support tile weight and screw fixtures.
*   **Waterproofing:** Foil system mandatory in Zone 1.

---

## SECTION 7: PBL (PLAN- OCH BYGGLAGEN) - PERMITS & ROLES

### MANDATORY ROLES
*   **Kontrollansvarig (KA):** Every new villa project MUST have a certified KA (independent of the builder).
    *   *Task:* Verify the control plan, attend technical consultation.
    *   *Cost:* **25,000 - 40,000 SEK** depending on complexity.

### MUNICIPAL PROCESS (Myndighetskrav)
1.  **Bygglov (Permit):** Fee varies by municipality (Area-based). Approx **30,000 - 50,000 SEK**.
2.  **Tekniskt Samråd:** Mandatory meeting before start.
3.  **Startbesked:** You cannot start digging without this.
4.  **Slutbesked:** You cannot move in without this.

### AI PRICING LOGIC FOR PBL:
*   **IF New Build:** Always add "KA Arvode" and "Bygglovsavgifter".
*   **IF Extension < 15m2 (Attefall):** Bygglov not needed, but "Anmälan" is. Lower fee (~5,000 kr). KA might not be required.
*   **IF Renovation:** Usually exempt unless load-bearing walls are moved.

---

## SECTION 8: CONTRACT & LEGAL IMPACT ON PRICING

**1. CONTRACT TYPE (Standard for Villas)**
*   **ABT 06 (Totalentreprenad):** The builder is responsible for both design and execution.
    *   *Impact:* Contractors add a **10-15% Risk Premium** to cover design errors and unforeseen issues.
    *   *AI Instruction:* Assume ABT 06 pricing (Higher unit rates) unless specified otherwise.

**2. CONSUMER LAW (Konsumenttjänstlagen)**
*   **The 15% Rule:** The final price cannot exceed the estimate by more than 15%.
*   **10-Year Liability:** Builders are liable for defects for 10 years.
*   *Impact:* "Warranty Buffer" of **2-3%** is added to all labor/material costs.

---

## SECTION 9: SWEDISH FLOOR PLAN OCR PATTERNS

### Room Naming Conventions (from analysis of 11 JB Villan floor plans)

#### Bedroom Variations
| Pattern | Meaning | Example |
|---------|---------|---------|
| SOVRUM 1 | Bedroom 1 | Full name with number |
| SOV 1 | Bedroom 1 | Abbreviated |
| SOV1 | Bedroom 1 | No space |
| EV. SOV | Possible bedroom | "Eventuellt sovrum" |
| MASTER | Master bedroom | English term used |

#### Living/Dining Variations
| Pattern | Meaning | Notes |
|---------|---------|-------|
| VARDAGSRUM | Living room | Full name |
| V.RUM | Living room | Abbreviated |
| ALLRUM | Family room | Multi-purpose room |
| MATPLATS | Dining area | Often combined |
| KÖK/MATPLATS | Kitchen/Dining | Combined rooms use "/" |
| MATPLATS / VARDAGSRUM | Dining/Living | Combined open plan |

#### Combined Room Patterns (Important!)
Swedish floor plans often show combined rooms with "/" separator:
*   `KÖK/VARDAGSRUM` - Open plan kitchen/living
*   `KÖK/MATPLATS` - Kitchen with dining area
*   `GROVENTRÉ/TVÄTT` - Utility entrance/laundry
*   `TVÄTT/GROVENTRÉ` - Same, reversed
*   `WC/BAD` - Toilet/bathroom combined
*   `WC/D` - Toilet/shower (WC/Dusch)
*   `GARAGE/FÖRRÅD` - Garage with storage

#### Bathroom Patterns
| Pattern | Meaning | Category |
|---------|---------|----------|
| WC | Toilet only | bathroom |
| WC 1, WC 2 | Numbered toilets | bathroom |
| WC/BAD | Toilet + bath | bathroom |
| WC/D | Toilet + shower | bathroom |
| BAD | Bathroom | bathroom |
| BADRUM | Bathroom | bathroom |
| DUSCH | Shower room | bathroom |

#### Storage/Closet Patterns
| Pattern | Meaning | Category |
|---------|---------|----------|
| KLK | Walk-in closet | storage (BOA) |
| KLK 1, KLK 2 | Numbered closets | storage (BOA) |
| KLÄDKAMMARE | Wardrobe room | storage (BOA) |
| FÖRRÅD | Storage room | storage (Biarea) |
| GARDEROB | Wardrobe | storage (BOA) |

#### Equipment Labels in Floor Plans
These labels indicate installed equipment (not rooms):

| Label | Swedish | English | Indicates |
|-------|---------|---------|-----------|
| VP | Värmepump | Heat pump | HVAC system present |
| TM | Tvättmaskin | Washing machine | Laundry equipment |
| TT | Torktumlare | Tumble dryer | Laundry equipment |
| F | Frys | Freezer | Kitchen appliance |
| K | Kyl | Refrigerator | Kitchen appliance |
| DM | Diskmaskin | Dishwasher | Kitchen appliance |
| U/M | Ugn/Mikro | Oven/Microwave | Kitchen appliance |
| MVU | Mikrovågsugn | Microwave | Kitchen appliance |
| ELC | Elcentral | Distribution board | Electrical |
| EI30 | Brandklassning | Fire rating | Fire separation |
| VMS | Varmvattenberedare | Water heater | Plumbing |
| GVF | Golvvärfördelare | Underfloor heating manifold | HVAC |
| BRASKAMIN | Eldstad | Fireplace | Heating feature |

#### Outdoor Space Patterns
| Pattern | Category | Include in pricing? |
|---------|----------|---------------------|
| ALTAN | terrace | Only if detected |
| UTEPLATS | terrace | Only if detected |
| TERRASS | terrace | Only if detected |
| VERANDA | terrace | Only if detected |
| BALKONG | terrace | Only if detected |
| DECK | terrace | Only if detected |

**IMPORTANT:** Never assume outdoor spaces exist. Only include terrace/deck pricing if explicitly detected in the floor plan.

### OCR Best Practices

1. **Pattern Matching Order:** Match longer patterns first to avoid partial matches
   - Match `KÖK/MATPLATS` before `KÖK`
   - Match `WC/BAD` before `WC`

2. **Area Extraction:** Look for patterns like:
   - `ROOM_NAME\n12.5 m²`
   - `ROOM_NAME 12.5 m²`
   - `ROOM_NAME\n12,5 m²` (Swedish decimal comma)

3. **Deduplication:** Use (room_name, area) tuple to avoid OCR duplicates

4. **Area Validation:**
   - Skip areas < 1.0 m² (likely labels, not rooms)
   - Skip areas > 100 m² (likely summary values like BOYTA)

5. **Summary Areas to Look For:**
   - `BOYTA: 130.7m²` - Living area (BOA)
   - `BTA: 184.9m²` - Total gross area
   - `BIYTA: 48.4m²` - Secondary area
   - `BYGGYTA: 187.3m²` - Building footprint

---

## SECTION 10: AI ANALYSIS INSTRUCTIONS (MASTER)

### CRITICAL PRINCIPLES

**⚠️ NO HARDCODING OR ASSUMPTIONS**
The AI must ONLY include items it actually detects in the floor plan. This is a pricing tool with high stakes - incorrect assumptions lead to wrong quotes.

*   ❌ Never assume terrace/deck exists
*   ❌ Never assume entry steps exist
*   ❌ Never add appliances without detecting kitchen/laundry
*   ✅ Only add patio door if terrace is detected
*   ✅ Only add appliances if kitchen or laundry room is detected

### ANALYSIS WORKFLOW

1.  **OCR & ROOM EXTRACTION:**
    *   Extract text via Document AI
    *   Parse room names using Swedish patterns (Section 9)
    *   Extract areas (handle both . and , as decimal separators)
    *   Deduplicate by (name, area) tuple

2.  **AREA CLASSIFICATION (SS 21054):**
    *   Classify each room as BOA or Biarea
    *   Calculate totals for each category
    *   Apply 3.5% wall thickness adjustment (NTA → BRA)
    *   **Report both BOA and Biarea separately**

3.  **EQUIPMENT DETECTION:**
    *   Scan for equipment labels (VP, TM, TT, etc.)
    *   Only add equipment-related pricing if detected

4.  **AREA CALCULATION:**
    *   **Foundation/Roof:** Use total gross area (BOA + Biarea with wall adjustment)
    *   **Flooring/Interior:** Use room-specific areas with appropriate rates
    *   **kr/m² calculation:** Use BOA only (standard practice for comparison)

5.  **COMPLIANCE SCAN (BBR):**
    *   Check Bathroom 1.3m turning circle
    *   Check Garage fire wall (EI30 required)
    *   Verify wet room waterproofing requirements

6.  **QUANTITY TAKE-OFF (AMA/BBV):**
    *   Calculate areas from detected rooms
    *   Add 10% waste for materials
    *   **Bathroom Walls:** Use "Wet Room Wall" assembly (Säker Vatten compliant)
    *   **Garage:** Use lower-spec finishes (concrete floor, basic walls)

7.  **PRICING (ABT 06):**
    *   Use the **2025 rates** from Part 4
    *   **RISK PREMIUM:** Apply **12% markup** to construction items
    *   **REGIONAL LOGIC:** Adjust for location-specific costs (Section 5)
    *   **MANDATORY ADDITIONS:**
        *   Climate Declaration (Admin)
        *   BAS-P/U Safety Coordination (Admin)
        *   Leakage Trays (Kitchen) - only if kitchen detected
        *   Kontrollansvarig (KA) (Admin)
        *   Bygglovsavgifter (Admin)

### PRICING BY AREA TYPE

| Area Type | Foundation | Flooring | Walls | Notes |
|-----------|------------|----------|-------|-------|
| BOA (Living) | 3,500 kr/m² | 850-1,600 kr/m² | 1,450-4,200 kr/m² | Full finish |
| Biarea (Garage) | 2,500 kr/m² | 350 kr/m² | 800 kr/m² | Basic finish |
| Biarea (Storage) | 3,000 kr/m² | 450 kr/m² | 1,000 kr/m² | Simple finish |

### OUTPUT REQUIREMENTS

The analysis must return:
```json
{
  "items": [...],           // Cost items with phase, description, pricing
  "totalArea": 189.5,       // Total gross area (BOA + Biarea)
  "boa": 140.2,             // Living area only
  "biarea": 49.3,           // Secondary area only
  "rooms": [...],           // Detected rooms with category and is_biarea flag
  "areaBreakdown": {
    "boa_net": 134.6,       // BOA from room labels
    "biarea_net": 48.4,     // Biarea from room labels
    "total_net": 183.0,     // Sum of room labels
    "boa_gross": 139.3,     // BOA with wall adjustment
    "biarea_gross": 50.1,   // Biarea with wall adjustment
    "total_gross": 189.4    // Total with wall adjustment
  }
}
```
